# 菲涅尔反射在材质表现的运用

做过渲染的人都知道材质里有个菲涅尔参数，Scott Robertson 也在手绘教学中强调过菲涅尔反射的表现。菲涅尔反射对表现材质感起着很重要的作用，这次我就和大家来聊聊这个话题。

 

菲涅尔反射是一种以科学家Fresnel名字命名的自然现象，任何物体在反射光线时都伴随着这么一种现象，即越正对我们视线的地方反射越弱，越偏离我们视线的地方反射越强。

![img](http://ox55f9bg6.bkt.clouddn.com/2017-12-09-013915.jpg)

看湖面，远处偏离我们视线的地方反射着周围的山峦，近处正对我们视线的地方环境反射变弱甚至能看清湖底，这就是菲涅尔反射现象

![img](http://ox55f9bg6.bkt.clouddn.com/2017-12-09-013914.jpg)

这是维基百科里菲涅尔反射的图表，描述了入射角度和反射强度的关系。光是一种电磁波，这里把电磁波的震荡拆分成了两个方向，因此有两条曲线

这种反射强弱曲线因物体材质不同而异，因此每种材质被赋予了一个相应的物理属性，即菲涅尔折射系数（Fresnel Index of Refraction，没错，就是折射）。

因为我们的落脚点是视觉效果，不是科学研究，因此我们不去探讨过多物理学上的概念，

想要了解更多的话可以去维基百科搜索“fresnel equations”。

 那么对应到渲染中，高级渲染器都有Fresnel IOR控制端，比如 MaxwellRender、Vray、MentalRay、Arnold 等等。（IOR 在 Keyshot 中的名称是折射率）

比较简单的即时渲染器如Vred，Fresnel IOR的控制参数隐藏的有点深，并且没有用“Fresnel”的字样，我猜测这类渲染器并不鼓励我们直接去控制菲涅尔反射，毕竟它们是以简单易用为主，尽量避免相对“晦涩”的概念，而且它还有一个预设材质库供我们直接调用。

 

![img](http://ox55f9bg6.bkt.clouddn.com/2017-12-09-013920.jpg)

Vray材质的Fresnel IOR就在反射属性栏中

![img](http://ox55f9bg6.bkt.clouddn.com/2017-12-09-13921.jpg)

从上图中可以直接看到菲涅尔反射现象以及不同的菲涅尔值所产生的影响

为了看得直观一点，我单独输出了反射层（Reflection），如中间一列所示；为了再直观一点，我又输出了反射过滤层（Reflection Filter），如最右列所示，它可以理解为是罩在原始反射（rawReflection）上的一层蒙版，叠加后得到了正确的反射，如下图所示：

![img](http://ox55f9bg6.bkt.clouddn.com/2017-12-09-013917.jpg)

大家可以发现，反射过滤层其实就是菲涅尔反射现象的图示表达。当我们调整菲涅尔值的时候，其实就是在调整这个蒙版，从而控制反射的整体强弱和强弱之间的变化曲线。

具体说来，菲涅尔值越小，整体反射越弱的同时强度衰变明显；菲涅尔值越大，反射越强的同时强度衰变减弱。网上可以找到各种材质的菲涅尔值，我个人的建议是知道大概就好，严格遵守数值没有意义，关键看效果。

球球玩腻了，我们上车，X6渲染出图：

成图（beauty）

![img](http://ox55f9bg6.bkt.clouddn.com/2017-12-09-013918.jpg)

反射（reflection）

![img](http://ox55f9bg6.bkt.clouddn.com/2017-12-09-013923.jpg)

原始反射（rawReflection），即完完全全的反射环境

![img](http://ox55f9bg6.bkt.clouddn.com/2017-12-09-13918.jpg)

反射过滤（reflectionFilter），也叫菲涅尔层

![img](http://ox55f9bg6.bkt.clouddn.com/2017-12-09-013913.jpg)

它们的关系如下图：

反射过滤 x 原始反射 = 反射

![img](http://ox55f9bg6.bkt.clouddn.com/2017-12-09-013919.jpg)

有些较简单的材质器不能直接输出反射过滤层，没关系，这么做：先用车漆材质输出反射层a，再换成高亮镀铬材质输出反射层b，然后用反射层a除以反射层b就得到反射过滤层了！

看到这里，大家是不是有所启发，至少对我个人来说，我很兴奋，这个反射过滤层，或者叫菲涅尔层，对我手绘的帮助太大了。大家都知道，手绘中造型通过明暗（value）表达，材质感通过反射(reflection)表达，通常来说反射比明暗更难去画好，难点就在反射物象的形变和反射强弱的变化需要更多的逻辑思维。通过接触渲染我对菲涅尔反射有了更深的理解，在画精图时，菲涅尔图层也是一个非常好的参考，画画时对哪里反射强一点哪里弱一点会有一个更清晰更准确的概念。

![img](http://ox55f9bg6.bkt.clouddn.com/2017-12-09-013925.jpg)

 

![img](http://ox55f9bg6.bkt.clouddn.com/2017-12-09-013921.jpg)

以Photoshop为例，可以用以上两种方式安排图层，然后通过调整菲涅尔层来把反射调整到最理想的状态。

如果是做渲染，那就更需要灵活的利用菲涅尔反射去精准的表达材质感了，好的效果来自对细节的把控。

